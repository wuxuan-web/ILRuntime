# ILRuntime调试架构说明

## 调试组件关系

```
VSCode扩展 (TypeScript)
    ↓ 通过DAP协议通信
调试适配器 (C# - VSCodeDAILRuntime)
    ↓ 通过UDP广播发现
ILRuntime调试服务 (C# - DebugService)
    ↓ 集成在Unity项目中
Unity游戏进程
```

## 调试流程

### 1. 启动阶段
1. **Unity项目启动** - 加载ILRuntime和调试服务
2. **调试服务广播** - 通过UDP广播告知调试器位置
3. **VSCode扩展监听** - 监听UDP广播，发现调试服务
4. **建立连接** - 扩展与调试服务建立调试连接

### 2. 调试阶段
1. **设置断点** - 在VSCode中设置断点
2. **断点同步** - 断点信息发送到ILRuntime调试服务
3. **代码执行** - Unity中执行热更新代码
4. **断点触发** - 遇到断点时暂停执行
5. **调试信息** - 显示变量、调用栈等信息

## 配置要求

### Unity项目端
- 集成ILRuntime插件
- 启用调试服务
- 配置UDP广播端口

### VSCode端
- 安装ILRuntime Debug扩展
- 配置调试适配器路径
- 启动调试会话

## 常见问题

### 问题1：找不到ILRuntime程序
- 原因：Unity项目未启动或调试服务未启用
- 解决：先启动Unity项目，再启动VSCode调试

### 问题2：无法连接调试服务
- 原因：UDP端口被占用或防火墙阻止
- 解决：检查端口配置和网络设置

### 问题3：断点不工作
- 原因：热更新代码未重新编译或加载
- 解决：重新编译热更新项目并重新加载DLL
